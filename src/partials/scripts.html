<script src="js/cookie-banner.js"></script>
<script src="js/form-performance-optimizer.js"></script>
<!-- Essential JS - Defer loading -->
<script defer="" src="js/plugins/jquery.min.js"></script>
<script defer="" src="js/plugins/swup.min.js"></script>
<script defer="" src="js/plugins/gsap.min.js"></script>
<script defer="" src="js/plugins/ScrollTrigger.min.js"></script>
<script defer="" src="js/plugins/ScrollTo.min.js"></script>
<script defer="" src="js/smooth-anchors.js"></script>
<script defer="" src="js/main.js"></script>
<script defer="" src="js/safari-scroll-fix.js"></script>

<!-- Non-essential JS - Lazy load when needed -->
<script>
      // Lazy load Swiper only when partner section is visible
      function loadSwiper() {
        if (window.Swiper) return; // Already loaded
        
        const script = document.createElement('script');
        script.src = 'js/plugins/swiper.min.js';
        script.onload = function() {
          // Initialize Swiper after loading
          if (typeof window.initSwiper === 'function') {
            window.initSwiper();
          }
        };
        document.head.appendChild(script);
      }

      // Lazy load Fancybox only if galleries exist
      function loadFancybox() {
        if (window.fancybox || document.querySelector('[data-fancybox="gallery"]')) {
          const script = document.createElement('script');
          script.src = 'js/plugins/fancybox.min.js';
          script.onload = function() {
            // Initialize Fancybox after loading
            if (typeof window.initFancybox === 'function') {
              window.initFancybox();
            }
          };
          document.head.appendChild(script);
        }
      }

      // Load Swiper when partner section comes into view
      const partnerSection = document.querySelector('.mil-partners-section');
      if (partnerSection) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              loadSwiper();
              observer.unobserve(entry.target);
            }
          });
        }, { rootMargin: '50px' });
        observer.observe(partnerSection);
      }

      // Load Fancybox when galleries come into view
      const galleries = document.querySelectorAll('[data-fancybox="gallery"]');
      if (galleries.length > 0) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              loadFancybox();
              observer.unobserve(entry.target);
            }
          });
        }, { rootMargin: '100px' });
        galleries.forEach(gallery => observer.observe(gallery));
      }

      // Fallback: Load Swiper after 2 seconds if not loaded
      setTimeout(() => {
        if (!window.Swiper) {
          loadSwiper();
        }
      }, 2000);
      
    </script>
<!-- Form Performance Monitor (for debugging) -->
<script defer="" src="js/form-performance-monitor.js"></script>
<script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Maru",
    "url": "https://maruonline.com/",
    "logo": "https://maruonline.com/img/optimized/new_maru_logo_neutral-960.png",
    "sameAs": [
      "https://www.linkedin.com/company/maruonline",
      "https://x.com/maru_africa",
      "https://instagram.com/maru_automations",
      "https://facebook.com/maruonlin"
    ]
  }</script>
  <script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Maru",
    "url": "https://maruonline.com/"
  }</script>